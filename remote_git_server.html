<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="icon" href="assets/portal.ico">
  <title>Remote Git Server -- Homelab | Hylown</title>
  <link rel="stylesheet" href="assets/css/hylowncom.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.13.1/font/bootstrap-icons.min.css">
</head>
<body>

  <header class="header top-bar">
    <div class="wrapper no-pad">
      <ul class="navigation">
        <li class="hamburger-icon"><a href="javascript:void(0)" onclick="toggleNav()"><span>&nbsp;</span><span>&nbsp;</span><span>&nbsp;</span></a></li>
        <li style="padding:0;"><a style="padding:0;margin:0 10;" href="https://hylown.com"><img src="assets/portal.png" width="31px" height="31px"></a></li>
        <li><a href="homelab.html">Homelab</a></li>
        <li><a href="apps.html">Apps</a></li>
        <li><a href="consulting.html">Consulting</a></li>
        <li><a style="font-size:1.5em;" href=""><i class="bi bi-linkedin"></i></a></li>
        <li><a style="font-size:1.5em;" href=""><i class="bi bi-github"></i></a></li>
        <li><a href="buy_us_a_coffee.html">Support Us</a></li>
      </ul>
    </div>
  </header>

  <div class="container">
    <main class="main">
        <div class="main__inner grid">
            <div class="sidebar sidebar--primary" id="sidebar--primary">
                <div class="sidebar__scrollwrap">
                    <div class="sidebar__inner sidebar__inner-left">
                      <div>
                        <label>Homelab</label>
                        <a href="javascript:void(0)" class="closebtn" id="closebtn" onclick="toggleNav()" style="display:none;">&times;</a>
                      </div>
                      <ul class="side-nav">
                        <li><a id="Home" href="homelab.html">Home</a></li>
                        <li><a id="SSH" href="ssh.html">SSH</a></li>
                        <li><a id="RaspberryPi" href="raspberry_pi.html">Raspberry Pi</a>
                          <ul class="side-nav side-nav-2">
                            <li><a id="RaspberryPi-Initialize" href="raspberry_pi_initialize.html">Initialize</a></li>
                            <li><a id="RaspberryPi-PCIE" href="raspberry_pi_pcie.html">PCIe Boot NVMe</a></li>
                            <li><a id="Extras" href="raspberry_pi_extras.html">Extras</a></li>
                          </ul>
                        </li>
                        <li><a id="LocalHTTPServer" href="local_http_server.html">Local HTTP Server</a></li>
                        <li><a id="LocalGitServer" href="local_git_server.html">Local Git Server</a></li>
                        <li><a id="RemoteGitServer" href="remote_git_server.html">Remote Git Server</a></li>
                      </ul>
                    </div>
                </div>
            </div>
            <div class="sidebar sidebar--secondary" style="top:48px;">
                <div class="sidebar__scrollwrap">
                    <div class="sidebar__inner">
                      <div>
                        <label>On this page</label>
                      </div>
                      <ul class="side-nav template__nav" id="right-nav">
                        <li><a href="">back to top</a></li>
                        <li class="template__nav-item"><a href="#features">Features</a></li>
<li class="template__nav-item"><a href="#machine">Machine</a></li>
<li class="template__nav-item"><a href="#on-local-machines-using-git-bash-in-windows">On local machines (using Git Bash in Windows)</a></li>
<li class="template__nav-item"><a href="#on-the-remote-server">On the remote server</a></li>
<li class="template__nav-item"><a href="#on-a-local-machine">On a local machine</a></li>
<li class="template__nav-item"><a href="#on-the-remote-server_1">On the remote server</a></li>
                      </ul>
                    </div>
                </div>
            </div>
            <div class="content">
              <article>
                <a class="source-button" href="" title="Edit this page"><svg xmlns="http://www.w3.org/2000/svg" width="30px" height="30px" viewBox="0 0 24 24"><path d="M10 20H6V4h7v5h5v3.1l2-2V8l-6-6H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h4zm10.2-7c.1 0 .3.1.4.2l1.3 1.3c.2.2.2.6 0 .8l-1 1-2.1-2.1 1-1c.1-.1.2-.2.4-.2m0 3.9L14.1 23H12v-2.1l6.1-6.1z"></path></svg></a>
                <a class="source-button" href="remote_git_server.md" title="View source of this page"><svg xmlns="http://www.w3.org/2000/svg" width="30px" height="30px" viewBox="0 0 24 24"><path d="M17 18c.56 0 1 .44 1 1s-.44 1-1 1-1-.44-1-1 .44-1 1-1m0-3c-2.73 0-5.06 1.66-6 4 .94 2.34 3.27 4 6 4s5.06-1.66 6-4c-.94-2.34-3.27-4-6-4m0 6.5a2.5 2.5 0 0 1-2.5-2.5 2.5 2.5 0 0 1 2.5-2.5 2.5 2.5 0 0 1 2.5 2.5 2.5 2.5 0 0 1-2.5 2.5M9.27 20H6V4h7v5h5v4.07c.7.08 1.36.25 2 .49V8l-6-6H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h4.5a8.2 8.2 0 0 1-1.23-2"></path></svg></a>
                <br>
                <h1 id="setup-git-on-a-remote-server">Setup Git on a remote server</h1>
<h3 class="subtitle" id="a-personal-private-git-server-on-a-secure-remote-machine"><em>A personal, private Git server on a secure, remote machine</em></h3>
<h2 class="template__section" id="features">Features</h2>
<ul>
<li>Encrypted read &amp; write to/from the server via SSH</li>
<li>Web interface via gitweb and its functionalities &ndash; already installed by web host provider</li>
</ul>
<h2 class="template__section" id="machine">Machine</h2>
<ul>
<li>Local: Windows 11 &amp; Raspberry Pi 5 (with Raspberry Pi OS Debian 12 Bookworm) local machines</li>
<li>Remote: </li>
<li>Web host provider: Bluehost<ul>
<li>Hosting plan: WordPress Plus Hosting</li>
</ul>
</li>
<li>Hosting platform: cPanel</li>
<li>OS: Red Hat 4.8.5-44</li>
</ul>
<h3 class="template__section" id="software-used">Software used</h3>
<ul>
<li>cPanel Terminal</li>
<li>git (already installed on server by cPanel; on Windows: git, including Git Bash; on Debian: git)</li>
<li>gitweb (already installed on server by cPanel)</li>
<li>Linux utilities (likely already installed): keygen, nano</li>
</ul>
<h2 class="template__section" id="on-local-machines-using-git-bash-in-windows">On local machines (using Git Bash in Windows)</h2>
<pre><code class="language-bash">cd # start at user home dir, e.g. /c/Users/junkb
ssh-keygen -o # allow to place keys in default dir; no passkey, i.e. hit enter twice
cat ~/.ssh/id_ed25519.pub # or whatever name it was given; use PUBLIC key
</code></pre>
<p>Then copy contents of the public key file into the clipboard.</p>
<h2 id="on-the-remote-server">On the remote server</h2>
<pre><code class="language-bash">touch ~/.ssh/tmp id_ed25519.win1.pub # a temp file to hold key
nano ~/.ssh/tmp id_ed25519.win1.pub
</code></pre>
<p>Then paste contents of the public key file; make sure it is all one line, should look something like this:</p>
<pre><code class="language-bash">ssh-ed25519 AAAACTHEQUICKBROWNFOXHELLOTHEREaThISALOOONGSTRINGust junkb@DESKTOP-3ICM930
</code></pre>
<p>Add the public key to the <code>authorized_keys</code> file:</p>
<pre><code class="language-bash">cat ~/.ssh/tmp/id_ed25519.win1.pub &gt;&gt; ~/.ssh/authorized_keys
</code></pre>
<p>Create a bare repo:</p>
<pre><code class="language-bash">cd ~/git/repos
mkdir project.git # the repo's dir name should end in .git
cd project.git
git init --bare
</code></pre>
<h2 class="template__section" id="on-a-local-machine">On a local machine</h2>
<h3 id="push-an-existing-repo-to-the-new-repo">Push an existing repo to the new repo</h3>
<p>An existing repo should first be pushed to the new repo on the server; this is why we add a <code>readme.md</code> file:</p>
<pre><code class="language-bash">mkdir ~/Desktop/temp/myproject
cd ~/Desktop/temp/myproject
git init
touch readme.md # so the repo is not empty
git add .
git commit -m 'hello'
git remote add origin hylownco@hylown.com:git/repos/project.git
git push origin master
</code></pre>
<p>Now other users can clone the repo; here we do it in another project on the same Windows machine:</p>
<pre><code class="language-bash">cd ~/Desktop/temp
git clone hylownco@hylown.com:git/repos/project.git
</code></pre>
<p>Now we can make changes and push to the server repo:</p>
<pre><code class="language-bash">cd project # this is the name given from the clone of project.git
nano readme.md
# add text
git add .
git commit -m 'changed readme.md in cloned repo'
git push origin master
</code></pre>
<p>Now other users can pull these changes; again here we do it in another repo on the same Windows machine:</p>
<pre><code class="language-bash">mkdir ~/Desktop/temp/myproject
cd ~/Desktop/temp/myproject
git init
git remote add origin hylownco@hylown.com:git/repos/project.git
git pull origin master
</code></pre>
<p>Note that another format can be used with the SSH protocol:</p>
<pre><code class="language-bash">ssh://hylownco@hylown.com/home3/hylownco/git/repos/project.git
</code></pre>
<h2 class="template__section" id="on-the-remote-server_1">On the remote server</h2>
<p>Note: the above works at first; I&rsquo;m not sure what breaks it, but after making some small changes and trying to push back again, I was getting this:</p>
<pre><code class="language-bash">$ git push origin master
fatal: bad config value for 'receive.denycurrentbranch' in config
fatal: Could not read from remote repository.

Please make sure you have the correct access rights
and the repository exists.
</code></pre>
<p>An internet search of &ldquo;git ssh bad config value for &lsquo;receive.denycurrentbranch&rsquo; in config&rdquo; led me to:</p>
<p>https://stackoverflow.com/questions/56990207/fatal-bad-config-value-for-receive-denycurrentbranch-in-config</p>
<p>Following this answer worked for me; git is in exaclty the same location on my server as in this answer, so running this exactly as in the answer on my server worked perfectly:</p>
<blockquote>
<p>I also got the same issue. When I run the command git &ndash;version it shows 2.24.1 but it wasn&rsquo;t accepting 
updateInstead as mentioned in the above question.</p>
<p>I did this to solve this issue:</p>
<p>Run this command.</p>
<p><code>bash
which git</code></p>
<p>It will give you the path of git.</p>
<p>Example output</p>
<p><code>bash
/usr/local/cpanel/3rdparty/lib/path-bin/git</code></p>
<p>Go to <code>~/.bashrc</code> file and add this code to the bottom of the file</p>
<p><code>bash
export PATH=/usr/local/cpanel/3rdparty/lib/path-bin:$PATH</code></p>
<p>*Note that I am not including git at the end of the path.</p>
<p>Hope this solves the issue.</p>
</blockquote>
                <p class="outro">To suggest an edit or correction to this page, please click the "Edit this page" button below or at the top to access the source file on GitHub.</p>
                <br>
                <div class="source-button-bottom">
                  <div class="source-button-bottom-inner">
                    <a id="a" class="source-button" href="remote_git_server.md" title="View source of this page"><svg xmlns="http://www.w3.org/2000/svg" width="50px" height="50px" viewBox="0 0 24 24"><path d="M17 18c.56 0 1 .44 1 1s-.44 1-1 1-1-.44-1-1 .44-1 1-1m0-3c-2.73 0-5.06 1.66-6 4 .94 2.34 3.27 4 6 4s5.06-1.66 6-4c-.94-2.34-3.27-4-6-4m0 6.5a2.5 2.5 0 0 1-2.5-2.5 2.5 2.5 0 0 1 2.5-2.5 2.5 2.5 0 0 1 2.5 2.5 2.5 2.5 0 0 1-2.5 2.5M9.27 20H6V4h7v5h5v4.07c.7.08 1.36.25 2 .49V8l-6-6H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h4.5a8.2 8.2 0 0 1-1.23-2"></path></svg></a>
                    <label id="b">View</label>
                  </div>
                  <div class="source-button-bottom-inner">
                    <a id="c" class="source-button" href="" title="Edit this page"><svg xmlns="http://www.w3.org/2000/svg" width="50px" height="50px" viewBox="0 0 24 24"><path d="M10 20H6V4h7v5h5v3.1l2-2V8l-6-6H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h4zm10.2-7c.1 0 .3.1.4.2l1.3 1.3c.2.2.2.6 0 .8l-1 1-2.1-2.1 1-1c.1-.1.2-.2.4-.2m0 3.9L14.1 23H12v-2.1l6.1-6.1z"></path></svg></a>
                    <label id="d">Edit</label>
                  </div>
                </div>
              </article>
            </div>
        </div>
    </main>
    <footer class="footer">
      <!--<div><p>All content copyright Hylown</p></div>-->
      <div><a href="tou.html">Terms of Use</a></div>
      <div><a href="https://hylown.com"><img src="assets/portal.png" width="100px" height="100px"></a></div>
      <div><a href="">back to top</a></div>
    </footer>
  </div>
  <script>
    document.getElementById('RemoteGitServer').classList.add('active')
  </script>
  <script src="assets/javascript/hylowncom.js"></script>
</body>
</html>